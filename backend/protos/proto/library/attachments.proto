syntax = "proto3";


package library;
option go_package = "library.v1";

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";

service AttachmentService {
  rpc CreateAttachment(CreateAttachmentRequest) returns (Attachment) {}
  rpc GetAttachment(GetAttachmentRequest) returns (Attachment) {}
  rpc DeleteAttachment(DeleteAttachmentRequest) returns (google.protobuf.Empty) {}
  rpc ListAttachmentsByBook(ListAttachmentsByBookRequest) returns (ListAttachmentsResponse) {}
}

message Attachment {
  int64 book_id = 1;
  string format = 2;
  string file_id = 3;
  google.protobuf.Timestamp created_at = 4;
  google.protobuf.Timestamp updated_at = 5;
}

message CreateAttachmentRequest {
  int64 book_id = 1;
  string format = 2;
  string file_id = 3;
}

message GetAttachmentRequest {
  int64 book_id = 1;
  string format = 2;
}

message DeleteAttachmentRequest {
  string file_id = 1;
}

message ListAttachmentsByBookRequest {
  int64 book_id = 1;
}

message ListAttachmentsResponse {
  repeated Attachment attachments = 1;
}
