# Client Management Service

gRPC-—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º—è–≥–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è, —Å–≤—è–∑—è–º–∏ —Å —Ç–∏–ø–∞–º–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –ü–æ–ª–Ω—ã–π CRUD –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Ç–∏–ø—É –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è URL –≤–µ–±-—Å–∞–π—Ç–æ–≤
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ UUID –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

## üóÉ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `clients`

–ü–æ–ª–µ | –¢–∏–ø | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ
-----|-----|-------------|----------
id | UUID | PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ë–î)
name | VARCHAR(255) | NOT NULL | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
description | TEXT | NOT NULL | –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
type_id | INT | REFERENCES client_types(id) | –°–≤—è–∑—å —Å —Ç–∏–ø–∞–º–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
website | VARCHAR(255) | NOT NULL | URL –≤–µ–±-—Å–∞–π—Ç–∞
is_active | BOOLEAN | DEFAULT TRUE | –§–ª–∞–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
created_at | TIMESTAMPTZ | DEFAULT CURRENT_TIMESTAMP | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
updated_at | TIMESTAMPTZ | DEFAULT CURRENT_TIMESTAMP | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ò–Ω–¥–µ–∫—Å—ã
- `idx_clients_type` (type_id)
- `idx_clients_active` (is_active)
- `idx_clients_created_at` (created_at)

## üì° API –ú–µ—Ç–æ–¥—ã

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ (Create)
```protobuf
rpc Create(CreateRequest) returns (Client);

message CreateRequest {
  string name = 1;
  string description = 2;
  int32 type_id = 4;
  string website = 5;
}
```
**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**
```json
{
  "name": "Test Corp",
  "description": "–ü—Ä–∏–º–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏",
  "type_id": 1,
  "website": "https://example.com"
}
```
**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞**

```json
{
  "id": "fd5e81b6-e7db-45a8-9e62-80fd16db1764",
  "name": "Test Corp",
  "description": "–ü—Ä–∏–º–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏",
  "type_id": 1,
  "website": "https://example.com",
  "is_active": true,
  "created_at": {
    "seconds": "1746605299",
    "nanos": 747326000
  },
  "updated_at": {
    "seconds": "1746605299",
    "nanos": 747326000
  }
}
```
**–ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫**

**INVALID_ARGUMENT (code 3):**

```json
{
  "code": 3,
  "message": "invalid argument: name must be 1-255 characters",
  "details": []
}
```
```json
{
  "code": 3,
  "message": "invalid argument: website must be valid URL",
  "details": []
}
```
**NOT_FOUND (code 5):**
```json
{
  "code": 5,
  "message": "client type not found: 999",
  "details": []
}
```
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

**–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π:**
- name: 1-255 —Å–∏–º–≤–æ–ª–æ–≤ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
- description: 1-10000 —Å–∏–º–≤–æ–ª–æ–≤ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
- website: –≤–∞–ª–∏–¥–Ω—ã–π URL (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
- type_id: —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π ID —Ç–∏–ø–∞ –∫–ª–∏–µ–Ω—Ç–∞

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
- id: –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ UUID v4
- is_active: —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ true
- created_at/updated_at: —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è —Å–µ—Ä–≤–µ—Ä–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∏ –≤ –ë–î:**
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —Å–≤—è–∑–∫–∏ name+type_id
- –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ type_id –≤ client_types
- –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å URL —á–µ—Ä–µ–∑ –ø—Ä–∏–∫–ª–∞–¥–Ω—É—é –ª–æ–≥–∏–∫—É

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
- XSS-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ (Get)
```protobuf
rpc Get(GetRequest) returns (Client);

message GetRequest {
  string id = 1;
}
```
**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**

```json
{
  "id": "fd5e81b6-e7db-45a8-9e62-80fd16db1764"
}
```
**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞**

```json
{
  "id": "fd5e81b6-e7db-45a8-9e62-80fd16db1764",
  "name": "Test Corp",
  "description": "–ü—Ä–∏–º–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏",
  "type_id": 1,
  "website": "https://example.com",
  "is_active": true,
  "created_at": {
    "seconds": "1746605299",
    "nanos": 747326000
  },
  "updated_at": {
    "seconds": "1746605299",
    "nanos": 747326000
  }
}
```
**–ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫**

**INVALID_ARGUMENT (code 3):**

```json
{
  "code": 3,
  "message": "invalid argument: invalid UUID format",
  "details": [
    {
      "@type": "type.googleapis.com/google.rpc.BadRequest",
      "field_violations": [
        {
          "field": "id",
          "description": "invalid UUID length: 10"
        }
      ]
    }
  ]
}
```
**NOT_FOUND (code 5):**

```json
{
  "code": 5,
  "message": "client not found",
  "details": []
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

**–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ UUID (–≤–µ—Ä—Å–∏—è 4)
- ID –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å RFC 4122

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—Ç–µ—á–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å—è—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –¥–æ—Å—Ç—É–ø–∞

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –ø–æ –ø–æ–ª—é id
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å —Å –≤—ã–±–æ—Ä–∫–æ–π –≤—Å–µ—Ö –ø–æ–ª–µ–π

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- 3 –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–≤—Ç–æ—Ä–∞ –ø—Ä–∏ transient errors
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ 5 –º–∏–Ω—É—Ç

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ (Update)
```protobuf
rpc Update(UpdateRequest) returns (Client);

message UpdateRequest {
  string id = 1;
  optional string name = 2;
  optional string description = 3;
  optional int32 type_id = 4;
  optional string website = 5;
}
```
**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**

```json
{
  "id": "fd5e81b6-e7db-45a8-9e62-80fd16db1764",
  "name": "Test Corp",
  "description": "–ü—Ä–∏–º–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏ upd",
  "type_id": 1,
  "website": "https://example.com"
}
```
**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞**

```json
{
  "id": "fd5e81b6-e7db-45a8-9e62-80fd16db1764",
  "name": "Test Corp",
  "description": "–ü—Ä–∏–º–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏ upd",
  "type_id": 1,
  "website": "https://example.com",
  "is_active": true,
  "created_at": {
    "seconds": "1746605299",
    "nanos": 747326000
  },
  "updated_at": {
    "seconds": "1746609903",
    "nanos": 103921000
  }
}
```
**–ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫**

**INVALID_ARGUMENT (code 3):**

```json
{
  "code": 3,
  "message": "invalid argument: at least one field must be provided",
  "details": []
}
```

```json
{
  "code": 3,
  "message": "invalid argument: no fields to update",
  "details": []
}
```
**NOT_FOUND (code 5):**
    
```json
{
  "code": 5,
  "message": "client type not found: 999",
  "details": []
}
```
```json
{
  "code": 5, 
  "message": "client not found: a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11", 
  "details": []
}
```
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

**–ü—Ä–∞–≤–∏–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
- –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –Ω–µ-null –ø–æ–ª—è
- –ü—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ type_id –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ client_types

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- name: 1-255 —Å–∏–º–≤–æ–ª–æ–≤ (–µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω–æ)
- website: –≤–∞–ª–∏–¥–Ω—ã–π URL (–µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω–æ)
- type_id: –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ (–µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω–æ)

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—é
- –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö –≤–µ—Ä—Å–∏–π
- SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—é

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–∏—á–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π –Ω–∞ 1 –º–∏–Ω—É—Ç—É
- –ü–∞–∫–µ—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π

**–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å:**
- –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ì–∞—Ä–∞–Ω—Ç–∏—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

### 4. –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ (Delete)
```protobuf
rpc Delete(DeleteRequest) returns (DeleteResponse);

message DeleteRequest {
  string id = 1;
  optional bool permanent = 2;
}

message DeleteResponse {
  bool success = 1;
}
```
**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤**

**–ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):**

```json
{
  "id": "fd5e81b6-e7db-45a8-9e62-80fd16db1764"
}
```
–§–∏–∑–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ:
```json
{
  "id": "fd5e81b6-e7db-45a8-9e62-80fd16db1764",
  "permanent": true
}
```

**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞**

```json
{
  "success": true
}
```
**–ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫**

**NOT_FOUND (code 5):**
```json
{
  "code": 5,
  "message": "client not found: a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11",
  "details": []
}
```
**FAILED_PRECONDITION (code 9):**
```json
{
  "code": 9,
  "message": "cannot delete client with active contracts",
  "details": []
}
```
**INVALID_ARGUMENT (code 3):**

```json
{
  "code": 3,
  "message": "invalid argument: invalid UUID format",
  "details": []
}
```
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

**–†–µ–∂–∏–º—ã —É–¥–∞–ª–µ–Ω–∏—è:**
- –ú—è–≥–∫–æ–µ: UPDATE clients SET is_active = FALSE
- –§–∏–∑–∏—á–µ—Å–∫–æ–µ: DELETE FROM clients (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π)

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
- –ù–∞–ª–∏—á–∏–µ –∑–∞–≤–∏—Å–∏–º—ã—Ö –∑–∞–ø–∏—Å–µ–π (–∑–∞–∫–∞–∑—ã, –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã) –ø—Ä–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º —É–¥–∞–ª–µ–Ω–∏–∏
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å UUID

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ
- –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
- –ê—É–¥–∏—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–º –∂—É—Ä–Ω–∞–ª–µ

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Ç–∞–±–ª–∏—Ü
- –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:**
- –ú—è–≥–∫–æ —É–¥–∞–ª–µ–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ Restore
- –§–∏–∑–∏—á–µ—Å–∫–∏ —É–¥–∞–ª–µ–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –Ω–µ –ø–æ–¥–ª–µ–∂–∞—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é
- 
### 5. –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ (List)
```protobuf
rpc List(ListRequest) returns (ListResponse);

message ListRequest {
  int32 page = 1;
  int32 count = 2;
  optional string search = 3;
  optional int32 type_id = 4;
  optional bool active_only = 5;
}

message ListResponse {
  repeated Client clients = 1;
  int32 total_count = 2;
}
```
**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**

```json
{
  "page": 1,
  "count": 20,
  "type_id": 1,
  "search": "Test"
}
```
–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞

```json
{
  "clients": [
    {
      "id": "fd5e81b6-e7db-45a8-9e62-80fd16db1764",
      "name": "Test Corp",
      "description": "–ü—Ä–∏–º–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏ upd",
      "type_id": 1,
      "website": "https://example.com",
      "is_active": true,
      "created_at": {
        "seconds": "1746605299",
        "nanos": 747326000
      },
      "updated_at": {
        "seconds": "1746612916",
        "nanos": 918682000
      }
    }
  ],
  "total_count": 1
}
```
**–ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫**

**INVALID_ARGUMENT (code 3):**

```json
{
  "code": 3,
  "message": "invalid argument: page must be ‚â• 1",
  "details": [
    {
  "@type": "type.googleapis.com/google.rpc.BadRequest",
    "field_violations": [
      {
        "field": "page",
        "description": "value must be positive"
      }
    ]}
  ]
}
```
```json
{
  "code": 3,
  "message": "invalid argument: count exceeds maximum limit (100)",
  "details": []
}
```
**NOT_FOUND (code 5):**

```json
{
  "code": 5,
  "message": "client type not found: 999",
  "details": []
}
```
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

**–ü–∞–≥–∏–Ω–∞—Ü–∏—è:**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: 1
- –†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã: 1-100 –∑–∞–ø–∏—Å–µ–π
- –§–æ—Ä–º—É–ª–∞ —Å–º–µ—â–µ–Ω–∏—è: offset = (page-1) * count

**–ü–æ–∏—Å–∫:**
- –ò—â–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤ –ø–æ–ª—è—Ö name –∏ description
- –†–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π (ILIKE '%query%')
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã: % (–ª—é–±—ã–µ —Å–∏–º–≤–æ–ª—ã), _ (–æ–¥–∏–Ω —Å–∏–º–≤–æ–ª)

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
- active_only=true: —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–∏ —Å is_active=true (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- type_id: —Å—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–∏–ø–∞

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç GIN-–∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ 1 –º–∏–Ω—É—Ç—É

**–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞**

**–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:**
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: updated_at DESC
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö: id ASC

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ –ø–æ–∏—Å–∫–æ–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ
- –õ–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤: 10 –≤ —Å–µ–∫—É–Ω–¥—É –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 6. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ (Restore)
```protobuf
rpc Restore(RestoreRequest) returns (Client);

message RestoreRequest {
  string id = 1;
}
```
**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**

```json
{
  "id": "fd5e81b6-e7db-45a8-9e62-80fd16db1764"
}
```
**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞**

```json
{
  "id": "fd5e81b6-e7db-45a8-9e62-80fd16db1764",
  "name": "Test Corp",
  "description": "–ü—Ä–∏–º–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏ upd",
  "type_id": 1,
  "website": "https://example.com",
  "is_active": true,
  "created_at": {
    "seconds": "1746605299",
    "nanos": 747326000
  },
  "updated_at": {
    "seconds": "1746612780",
    "nanos": 973352000
  }
}
```
**–ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫**
**INVALID_ARGUMENT (code 3):**

```json
{
  "code": 5,
  "message": "invalid argument: id",
  "details": []
}
```

**NOT_FOUND (code 5):**
```json
{
  "code": 5,
  "message": "NOT_FOUND: client not found",
  "details": []
}
```
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

**–õ–æ–≥–∏–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:**
- –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç is_active = TRUE
- –û–±–Ω–æ–≤–ª—è–µ—Ç updated_at –¥–æ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ type_id

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- –§–æ—Ä–º–∞—Ç UUID –∫–ª–∏–µ–Ω—Ç–∞
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º (is_active = FALSE)
- –ù–∞–ª–∏—á–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ (name + type_id)

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- –ê—É–¥–∏—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –∂—É—Ä–Ω–∞–ª–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ ACL –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º

**–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å:**
- –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ –≤–µ—Ä—Å–∏—é –∑–∞–ø–∏—Å–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–∫–∞—Ç –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–≤–æ—Ç –∏ –ª–∏–º–∏—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã
- –ù–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã—Ö —Å–ª—É–∂–±

### üõ°Ô∏è –ü–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è UUID –∏ URL
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ê—É–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ –ª–æ–≥–∏
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- PostgreSQL 14+
- Go 1.21+
- pgx/v5
- google.golang.org/protobuf
- google.golang.org/grpc