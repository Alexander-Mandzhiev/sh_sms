# Client Type Management Service

gRPC-—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–∏–ø–∞–º–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º—è–≥–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è, —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –ü–æ–ª–Ω—ã–π CRUD –¥–ª—è —Ç–∏–ø–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–æ–¥—ã —Ç–∏–ø–æ–≤ (case-sensitive)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

## üóÉ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `client_types`

–ü–æ–ª–µ | –¢–∏–ø | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ
-----|-----|-------------|----------
id | SERIAL | PRIMARY KEY | –ê–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
code | VARCHAR(50) | UNIQUE NOT NULL | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ —Ç–∏–ø–∞
name | VARCHAR(100) | NOT NULL | –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞
description | TEXT |  | –û–ø–∏—Å–∞–Ω–∏–µ —Ç–∏–ø–∞
is_active | BOOLEAN | DEFAULT TRUE | –§–ª–∞–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
created_at | TIMESTAMPTZ | DEFAULT CURRENT_TIMESTAMP | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
updated_at | TIMESTAMPTZ | DEFAULT CURRENT_TIMESTAMP | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ò–Ω–¥–µ–∫—Å—ã
- `idx_client_types_active` (is_active)
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –Ω–∞ –ø–æ–ª–µ code

## üì° API –ú–µ—Ç–æ–¥—ã

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–ø–∞ (Create)
```protobuf
rpc Create(CreateRequest) returns (ClientType);

message CreateRequest {
  string code = 1;
  string name = 2;
  optional string description = 3;
  optional bool is_active = 4;
}
```
**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**
```json
{
  "code": "VIP",
  "name": "VIP Client",
  "description": "Very Important Client Type",
  "is_active": true
}
```
**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞**
```json
{
  "id": 42,
  "code": "VIP",
  "name": "VIP Client",
  "description": "Very Important Client Type",
  "is_active": true,
  "created_at": {
    "seconds": 1718901234,
    "nanos": 567890000
  },
  "updated_at": {
    "seconds": 1718901234,
    "nanos": 567890000
  }
}
```
**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (ALREADY_EXISTS)**
```json
{
  "code": 6,
  "message": "code already exists: VIP",
  "details": []
}
```
**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (INVALID_ARGUMENT)**
```json
{
  "code": 3,
  "message": "invalid argument: code is required",
  "details": [
    {
      "@type": "type.googleapis.com/google.rpc.BadRequest",
      "field_violations": [
        {
          "field": "code",
          "description": "field is required"
        }
      ]
    }
  ]
}
```
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
1. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª–∏–Ω—ã –ø–æ–ª–µ–π:
- Code: 1-50 —Å–∏–º–≤–æ–ª–æ–≤
- Name: 1-100 —Å–∏–º–≤–æ–ª–æ–≤
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:
- id –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –ë–î
- created_at –∏ updated_at —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º
- is_active –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true
3. –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ–¥–∞ —á–µ—Ä–µ–∑ UNIQUE constraint
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏–Ω —á–µ—Ä–µ–∑ –ø—Ä–∏–∫–ª–∞–¥–Ω—É—é –ª–æ–≥–∏–∫—É

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–∏–ø–∞ (Get)
```protobuf
rpc Get(GetRequest) returns (ClientType);

message GetRequest {
  int32 id = 1;
}
```
**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**
```json
{
  "id": 1
}
```
**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞**
```json
{
  "id": 1,
  "code": "VIP",
  "name": "VIP Client",
  "description": "Very Important Client Type",
  "is_active": true,
  "created_at": {
    "seconds": 1718901234,
    "nanos": 567890000
  },
  "updated_at": {
    "seconds": 1718901234,
    "nanos": 567890000
  }
}
```
**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (NOT_FOUND)**
```json
{
  "code": 5,
  "message": "client type not found: 42",
  "details": []
}
```
**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (INVALID_ARGUMENT)**
```json
{
  "code": 3,
  "message": "invalid argument: invalid ID format",
  "details": [
    {
      "@type": "type.googleapis.com/google.rpc.BadRequest",
      "field_violations": [
        {
          "field": "id",
          "description": "must be positive integer"
        }
      ]
    }
  ]
}
```
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

**–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
- ID –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —Ü–µ–ª—ã–º —á–∏—Å–ª–æ–º
**–ü—Ä–æ–≤–µ—Ä–∫–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:**
- –ü–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π (is_active = TRUE)
- –ü–æ–ª–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –ø–æ–ª–µ–π –∑–∞–ø–∏—Å–∏
**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ó–∞–ø–∏—Å—å –ø–æ–ø—ã—Ç–æ–∫ –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º ID
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞
### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ (Update)
```protobuf
rpc Update(UpdateRequest) returns (ClientType);

message UpdateRequest {
  int32 id = 1;
  string code = 2;
  string name = 3;
  string description = 4;
}
```
**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**
```json
{
  "id": 42,
  "code": "VIP_2",
  "name": "Updated VIP",
  "description": "New description"
}
```

**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞**
```json
{
  "id": 42,
  "code": "VIP_2",
  "name": "Updated VIP",
  "description": "New description",
  "is_active": true,
  "created_at": {
    "seconds": 1718901234,
    "nanos": 567890000
  },
  "updated_at": {
    "seconds": 1718905678,
    "nanos": 901234000
  }
}
```

**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (NOT_FOUND)**
```json
{
  "code": 5,
  "message": "client type not found: 42",
  "details": []
}
```
**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (ALREADY_EXISTS)**
```json
{
  "code": 6,
  "message": "code conflict: VIP_2",
  "details": []
}
```
**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (INVALID_ARGUMENT)**
```json
{
  "code": 3,
  "message": "invalid argument: code must be 1-50 chars",
  "details": [
    {
      "@type": "type.googleapis.com/google.rpc.BadRequest",
      "field_violations": [
        {
          "field": "code",
          "description": "exceeds 50 characters"
        }
      ]
    }
  ]
}
```
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π:**
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: code, name
- –î–ª–∏–Ω–∞ code: 1-50 —Å–∏–º–≤–æ–ª–æ–≤
- –î–ª–∏–Ω–∞ name: 1-100 —Å–∏–º–≤–æ–ª–æ–≤
2. **–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ø–æ ID
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞ (–∏–≥–Ω–æ—Ä–∏—Ä—É—è —Ç–µ–∫—É—â–∏–π ID)
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
- –ü–æ–ª–µ updated_at —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ created_at –∏ is_active
4. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å:**
- –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –ê—Ç–æ–º–∞—Ä–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
### 4. –°–ø–∏—Å–æ–∫ —Ç–∏–ø–æ–≤ (List)
```protobuf
rpc List(ListRequest) returns (ListResponse);

message ListRequest {
  int32 page = 1;
  int32 count = 2;
  optional string search = 3;
  optional bool active_only = 4;
}
```
**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**
```json
{
  "page": 2,
  "count": 20,
  "search": "vip",
  "active_only": true
}
```

**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞**
```json
{
  "client_types": [
    {
      "id": 42,
      "code": "VIP",
      "name": "VIP Client",
      "description": "Very Important Client Type",
      "is_active": true,
      "created_at": {
        "seconds": 1718901234,
        "nanos": 567890000
      },
      "updated_at": {
        "seconds": 1718905678,
        "nanos": 901234000
      }
    }
  ],
  "total_count": 35,
  "current_page": 2
}
```

**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (INVALID_ARGUMENT)**
```json
{
  "code": 3,
  "message": "invalid argument: page must be ‚â• 1",
  "details": [
    {
      "@type": "type.googleapis.com/google.rpc.BadRequest",
      "field_violations": [
        {
          "field": "page",
          "description": "must be positive integer"
        }
      ]
    }
  ]
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
1. **–ü–∞–≥–∏–Ω–∞—Ü–∏—è:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã: 100 –∑–∞–ø–∏—Å–µ–π
- –ù—É–º–µ—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 1
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å–º–µ—â–µ–Ω–∏—è: OFFSET = (page-1)*count
2. **–ü–æ–∏—Å–∫:**
- –ò—â–µ—Ç –ø–æ –ø–æ–ª—è–º code (ILIKE), name (ILIKE) –∏ description (ILIKE)
- –†–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ–∏—Å–∫
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (–¥–æ–±–∞–≤–ª—è–µ—Ç % –≤–æ–∫—Ä—É–≥ –∑–∞–ø—Ä–æ—Å–∞)
3. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
- active_only=true: —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–∏ —Å is_active=true
- active_only=false –∏–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω: –≤—Å–µ –∑–∞–ø–∏—Å–∏
4. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:**
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: created_at DESC
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –¥–∞—Ç–∞—Ö

### 5. –£–¥–∞–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ (Delete)
```protobuf
rpc Delete(DeleteRequest) returns (google.protobuf.Empty);

message DeleteRequest {
  int32 id = 1;
  optional bool permanent = 2;
}
```
**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (–º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)**
```json
{
  "id": 42,
  "permanent": false
}
```
**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (—Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)**
```json
{
  "id": 42,
  "permanent": true
}
```

**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞**
```json
{}
```

**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (CONFLICT)**
```json
{
  "code": 10,
  "message": "cannot delete used client type: existing clients",
  "details": []
}
```

**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (NOT_FOUND)**
```json
{
  "code": 5,
  "message": "client type not found: 42",
  "details": []
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
1. **–†–µ–∂–∏–º—ã —É–¥–∞–ª–µ–Ω–∏—è:**
- –ú—è–≥–∫–æ–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç is_active=false
- –§–∏–∑–∏—á–µ—Å–∫–æ–µ: –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –∏–∑ –ë–î (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
2. **–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º
- –ù–∞–ª–∏—á–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø—Ä–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º —É–¥–∞–ª–µ–Ω–∏–∏
- –ì–∞—Ä–∞–Ω—Ç–∏—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–∫–∞—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º

### 6. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ (Restore)
```protobuf
rpc Restore(RestoreRequest) returns (ClientType);

message RestoreRequest {
  int32 id = 1;
}
```
**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞**
```json
{
  "id": 42,
  "code": "VIP",
  "name": "VIP Client",
  "description": "Very Important Client Type",
  "is_active": true,
  "created_at": {
    "seconds": 1718901234,
    "nanos": 567890000
  },
  "updated_at": {
    "seconds": 1718905678,
    "nanos": 901234000
  }
}
```
**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (NOT_FOUND)**
```json
{
  "code": 5,
  "message": "client type not found: 42",
  "details": []
}
```
**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (FAILED_PRECONDITION)**
```json
{
  "code": 9,
  "message": "client type already active: 42",
  "details": []
}
```
**–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ (CONFLICT)**
```json
{
  "code": 10,
  "message": "code conflict: VIP",
  "details": []
}
```
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
1. **–õ–æ–≥–∏–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:**
- –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç is_active=true
- –û–±–Ω–æ–≤–ª—è–µ—Ç updated_at
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ–¥–∞ —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π
2. **–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏
- –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å is_active
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ–¥–∞ –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
3. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å:**
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–∫–∞—Ç –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ

### üõ°Ô∏è –ü–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –ø–µ—Ä–µ–¥ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (rate limiting)

### üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- PostgreSQL 12+
- Go 1.21+

### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏:
- pgx/v5
- google.golang.org/protobuf
- google.golang.org/grpc